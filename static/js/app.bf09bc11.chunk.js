(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(23),a=n.n(o),r=n(2),s=n.n(r),c=n(0),i=n(49),l=n(131),u=n(141),d=n(6),f=n(31),p=n(4),h=n(27),b=n(58),g=n(73),j=n(93),x=n(94),w=n(5);function m(){var e=Object(c.useState)({coords:{longitude:0,latitude:0}}),t=a()(e,2),o=t[0],r=t[1],d=Object(c.useState)(null),h=a()(d,2),m=h[0],O=h[1],y=Object(c.useState)(!1),k=a()(y,2),C=k[0],S=k[1],P=Object(c.useState)(null),R=a()(P,2),I=(R[0],R[1]),L=Object(c.useState)({latitude:40,longitude:9,longitudeDelta:5,latitudeDelta:5}),D=a()(L,2),M=D[0],T=(D[1],Object(c.useState)([])),z=a()(T,2),U=z[0],A=z[1];Object(c.useEffect)((function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=A,e.next=3,s.a.awrap(Object(j.getAllMarkers)());case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),null,null,null,Promise)}),[]);var E=Object(c.useRef)();Object(c.useEffect)((function(){!function(){var e,t;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(x.b());case 2:if(e=n.sent,"granted"===e.status){n.next=7;break}return I("Permission to access location was denied"),n.abrupt("return");case 7:return n.next=9,s.a.awrap(x.a({}));case 9:t=n.sent,O(t),o={latitude:t.coords.latitude,longitude:t.coords.longitude,latitudeDelta:.0922,longitudeDelta:.0421},E.current.animateToRegion(o,2e3);case 12:case"end":return n.stop()}var o}),null,null,null,Promise)}()}),[]);return Object(w.jsxs)(p.a,{style:v.container,children:[Object(w.jsx)(b.a,{onPress:function(){!function(){var e,t;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:m.coords.latitude!=o.coords.latitude&&m.coords.longitude!=o.coords.longitude&&(e={long:m.coords.longitude,lat:m.coords.latitude,message:"Hey I'm here",name:"Marcel"},t=U,Object(j.putLocation)(e).then((function(e){t.push(e),A(t),S(!0)})),r(m));case 1:case"end":return n.stop()}}),null,null,null,Promise)}()},style:v.sendLocation,children:Object(w.jsx)(f.a,{children:"Teile deinen Standort"})}),Object(w.jsx)(g.a,{animationType:"slide",transparent:!0,visible:C,onRequestClose:function(){S(!C)},style:{alignItems:"center"},children:Object(w.jsxs)(p.a,{style:v.successModal,children:[Object(w.jsx)(u.a,{name:"checkmark-circle",style:{position:"absolute",top:10},size:60,color:"green"}),Object(w.jsx)(p.a,{style:v.info,children:Object(w.jsx)(f.a,{style:{fontSize:20},children:"Dein Standort wurde gespeichert!"})}),Object(w.jsx)(b.a,{style:{backgroundColor:"lightblue",borderRadius:10,height:40,justifyContent:"center",alignItems:"center",width:"50%",position:"absolute",bottom:10},onPress:function(){return S(!C)},children:Object(w.jsx)(f.a,{style:v.textStyle,children:"Ok!"})})]})}),Object(w.jsx)(l.default,{style:v.map,ref:E,initialRegion:M,followsUserLocation:!0,showsUserLocation:!0,clusterColor:"lightblue",clusterTextColor:"white",children:U.length?U.map((function(e,t){return Object(w.jsx)(i.a,{title:e.name,description:e.message,coordinate:{latitude:e.lat,longitude:e.long},tracksViewChanges:!1,icon:n(228)},e.id)})):null})]})}var O=h.a.get("window").width,y=h.a.get("window").height,v=d.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",flexDirection:"column"},map:{flex:1,width:"100%"},sendLocation:{position:"absolute",height:50,width:"50%",backgroundColor:"lightblue",zIndex:10,top:50,alignItems:"center",justifyContent:"center",borderRadius:20},successModal:{backgroundColor:"white",width:"70%",height:200,position:"absolute",left:.15*O,top:y/2-100,borderRadius:20,justifyContent:"center",alignItems:"center"}})},182:function(e,t,n){e.exports=n(229)},228:function(e,t,n){e.exports=n.p+"static/media/logowhite.3a6a13df.png"},93:function(e,t,n){"use strict";(function(e){var t=n(2),o=n.n(t),a=n(133),r=n.n(a).a.create({baseURL:"https://os-beyond.at/htl/geo",timeout:1e4}),s={getAllMarkers:function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.awrap(r.get("/geoinfos"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)},putLocation:function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(r.put("/geoinfo/0",{info:e}));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}};e.exports=s}).call(this,n(99)(e))}},[[182,1,2]]]);
//# sourceMappingURL=app.bf09bc11.chunk.js.map